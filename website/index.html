<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aquwity - Stay Focused and Get More Done</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="hero">
        <img src="logo.png" alt="Aquwity Logo" class="logo">
        <h1 class="app-name">Aquwity</h1>
        <p class="subtitle">The app that helps you stay focused and get more done.</p>
        <div class="button-group">
            <a id="download-btn" href="#" class="btn btn-primary">Download for Your OS</a>
            <a href="https://calendly.com/delanklee/30min" class="btn btn-outline">Book a Demo</a>
        </div>
        <p class="description">
            A simple, distraction-free focus app that helps you stay on track.
        </p>
        <p class="download-links">
            <a id="link-windows" href="#">Windows</a> |
            <a id="link-linux" href="#">Linux</a> |
            <a id="link-macos" href="#">macOS</a>
        </p>
    </main>
    <script>
        // Fetch latest release from GitHub API and set download links
        const REPO = 'delanoklee/aquwity2';

        async function setupDownloadLinks() {
            try {
                const response = await fetch(`https://api.github.com/repos/${REPO}/releases/latest`);
                const release = await response.json();

                // Find assets by file extension/pattern
                const assets = release.assets || [];
                const windowsAsset = assets.find(a => a.name.endsWith('.exe'));
                const linuxAsset = assets.find(a => a.name.endsWith('.deb'));
                const macosAsset = assets.find(a => a.name.endsWith('.dmg'));

                // Update individual download links
                if (windowsAsset) document.getElementById('link-windows').href = windowsAsset.browser_download_url;
                if (linuxAsset) document.getElementById('link-linux').href = linuxAsset.browser_download_url;
                if (macosAsset) document.getElementById('link-macos').href = macosAsset.browser_download_url;

                // Update main download button based on OS
                const btn = document.getElementById('download-btn');
                const ua = navigator.userAgent.toLowerCase();

                if (ua.includes('win') && windowsAsset) {
                    btn.textContent = 'Download for Windows';
                    btn.href = windowsAsset.browser_download_url;
                } else if (ua.includes('mac') && macosAsset) {
                    btn.textContent = 'Download for macOS';
                    btn.href = macosAsset.browser_download_url;
                } else if (ua.includes('linux') && linuxAsset) {
                    btn.textContent = 'Download for Linux';
                    btn.href = linuxAsset.browser_download_url;
                } else if (windowsAsset) {
                    // Default to Windows if OS not detected
                    btn.href = windowsAsset.browser_download_url;
                }
            } catch (error) {
                console.error('Failed to fetch release info:', error);
                // Fallback to generic releases page
                const fallback = `https://github.com/${REPO}/releases/latest`;
                document.getElementById('download-btn').href = fallback;
                document.getElementById('link-windows').href = fallback;
                document.getElementById('link-linux').href = fallback;
                document.getElementById('link-macos').href = fallback;
            }
        }

        setupDownloadLinks();
    </script>
</body>
</html>

